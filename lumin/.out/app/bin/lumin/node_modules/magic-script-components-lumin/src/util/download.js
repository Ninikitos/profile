import './logger.js';

const REGEX_URL = /^(http(s?):\/\/.*)/;

function isUrl(url) {
    return REGEX_URL.test(url);
}

async function download (urlAddress) {
    if (!isUrl(urlAddress)) {
        throw new TypeError('Invalid URL address');
    }

    let response;
    try {
        response = await fetch(urlAddress);
    } catch (error) {
        throw new Error(`Fetching form ${urlAddress} failed, error: ${error.message}`);
    }

    if (!response.ok) {
      throw new Error(`HTTP error, status = ${response.status}`);
    }

    return await response.cacheFile;
}

export default download;
export { isUrl };
